<script>
    document.addEventListener('DOMContentLoaded', activateSubmit);

    function activateSubmit() {
        document.getElementById('submit').addEventListener('click', function (event) {
            var name = document.getElementById('name').value;
            var reps = document.getElementById('reps').value;
            var weight = document.getElementById('weight').value;
            var date = document.getElementById('date').value;
            var lbs;
            if (document.getElementById('lbs').checked) {
                lbs = document.getElementById('lbs').value;
            } else {
                lbs = document.getElementById('kgs').value;
            }

            console.log(name, reps, weight, date, lbs);

            var req = new XMLHttpRequest();
            req.open("GET", 'http://52.32.137.80:3001/insert?name=' + name + '&reps=' + reps + '&weight='
                    + weight + '&date=' + date + '&lbs=' + lbs, true);
            req.addEventListener('load', function () {
                if (req.status >= 200 && req.status < 400) {
                    var response = req.responseText;
                    console.log(response);
                } else {
                    console.log("Error in network request: " + req.statusText);
                }
            });
            req.send(null);
            event.preventDefault();
        });

        var customers = new Array();
        customers.push(["Customer Id", "Name", "Country"]);
        customers.push([1, "John Hammond", "United States"]);
        customers.push([2, "Mudassar Khan", "India"]);
        customers.push([3, "Suzanne Mathews", "France"]);
        customers.push([4, "Robert Schidner", "Russia"]);

        //Create a HTML Table element.
        var table = document.createElement("TABLE");
        table.border = "1";

        //Get the count of columns.
        var columnCount = customers[0].length;

        //Add the header row.
        var row = table.insertRow(-1);
        for (var i = 0; i < columnCount; i++) {
            var headerCell = document.createElement("TH");
            headerCell.innerHTML = customers[0][i];
            row.appendChild(headerCell);
        }

        //Add the data rows.
        for (var i = 1; i < customers.length; i++) {
            row = table.insertRow(-1);
            for (var j = 0; j < columnCount; j++) {
                var cell = row.insertCell(-1);
                cell.innerHTML = customers[i][j];
            }
        }

        var dvTable = document.getElementById("dvTable");
        dvTable.innerHTML = "";
        dvTable.appendChild(table);



    }
</script>


<div id="dvTable">
</div>

<h1>Exercise Tracker</h1>
<div class="form-group">
    <form action="/insert" method="get" role="form" id="exForm" autocomplete="off">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="">
        <label for="reps">Reps</label>
        <input type="number" id="reps" name="reps" value="">
        <label for="weight">Weight</label>
        <input type="number" id="weight" name="weight" value="">
        <label for="date">Date</label>
        <input type="date" id="date" name="date" value="">
        <label>lbs</label>
        <input type="radio" id="lbs" name="lbs" value="true">
        <label>kgs</label>
        <input type="radio" id="kgs" name="lbs" value="false"><br>
        <input type="submit" id="submit">
    </form>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <caption>Completed Excercises</caption>
        <thead>
        <tr>
            <th>NAME</th>
            <th>REPS</th>
            <th>WEIGHT</th>
            <th>DATE</th>
            <th>LBS</th>
            <th></th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><input type="button" name="" value="Delete"></td>
            <td><input type="button" name="" value="Edit"></td>
        </tr>
        </tbody>
    </table>
</div>
<p>{{response}}</p>